\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerthemeLund}[2009/02/22 beamer style for the Centre of Mathematical Sciences in Lund; provided by Olivier Verdier <olivier@maths.lth.se>]

% colours as defined on <http://www3.lu.se/LUinternt/grafiskprofil/hjalp/vanligafragor.html>
\DefineNamedColor{named}{LUblue}{cmyk}{1.0,0.6,0,0.1}
\DefineNamedColor{named}{LUbronze}{cmyk}{0,0.4,1,0.3}

\colorlet{darkblue}{LUblue!60!black}

\DefineNamedColor{named}{gentledark}{gray}{.15}

\newif\ifbeamer@lundsection

\beamer@lundsectiontrue

\DeclareOptionBeamer{section}[true]{\csname beamer@lundsection#1\endcsname}
%\ExecuteOptionsBeamer{section=true}
\DeclareOptionBeamer{subsection}{\def\lundsubsection{#1}}
\ExecuteOptionsBeamer{subsection=true}
\DeclareOptionBeamer{authorwidth}[.25]{\def\lundauthorwidth{#1}}
\DeclareOptionBeamer{titlewidth}[.50]{\def\lundtitlewidth{#1}}
\DeclareOptionBeamer{datewidth}[.25]{\def\lunddatewidth{#1}}
\ExecuteOptionsBeamer{authorwidth}
\ExecuteOptionsBeamer{titlewidth}
\ExecuteOptionsBeamer{datewidth}
\ProcessOptionsBeamer

%\usetheme{Warsaw}
\ifbeamer@lundsection%
\useoutertheme[subsection=\lundsubsection]{miniframes}%
\fi
\usecolortheme{orchid}
\usecolortheme{whale}

\setbeamercolor*{palette primary}{fg=white,bg=LUblue}
\setbeamercolor*{palette secondary}{fg=white,bg=LUbronze}
\setbeamercolor*{palette tertiary}{fg=white,bg=gentledark}
\setbeamercolor*{palette quaternary}{fg=white,bg=gentledark} % not used?

\setbeamercolor{section in head/foot}{bg=LUblue}

% without this the title colours bg gets horribly blue
%\setbeamercolor{frametitle}{bg=darkblue}

%\setbeamercolor{frametitle right}{bg=black}
% to get the title in white on black:
\setbeamercolor{frametitle}{bg=gentledark}

% this turns out to be ugly with the shadow:
%\setbeamercolor{structure}{fg=LUblue}

\setbeamertemplate{sections/subsections in toc}[square]
\setbeamertemplate{mini frames}[box] % shows small rectangles as mini frames.



% footpage inspired by the `infolines` outer theme
\defbeamertemplate*{footline}{mc theme}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=\lundauthorwidth\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=\lundtitlewidth\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\insertshorttitle
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=\lunddatewidth\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
  \end{beamercolorbox}}%
  \vskip0pt%
}


% more space on the left and right
\setbeamersize{text margin left=1em,text margin right=1em}

% the various university logos come from <http://www3.lu.se/LUinternt/grafiskprofil/nedladdning/logotyper/logolu.html>

% LU logo in the bottom right corner
% \pgfdeclareimage[width=3cm]{logolund}{logoonly}
% \logo{
% \begin{colormixin}{25!white}
% \pgftext[at=\pgfpoint{-.75cm}{.5cm}]{\pgfuseimage{logolund}}
% \end{colormixin}
% }

%\logo{\includegraphics[width=3cm]{logoonlyweak}}
\logo{\includegraphics[height=1.4cm]{logoonly}}

% to get softer colours:
%\usecolortheme{rose}

%\setbeamercolor*{titlelike}{parent=structure}

% to get the usual math fonts:
%\usefonttheme[onlymath]{serif}

